
jQuery.Class("OpenStreetMap_Map_Js",{},{container:false,mapInstance:false,selectedParams:false,setSelectedParams:function(a){this.selectedParams=a},registerMap:function(c,a){var b=L.map("mapid").setView(c,a);L.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(b);this.mapInstance=b;return b},registerModalView:function(a){this.container=a;var e=[0,0];var b=2;$("#mapid").css({height:500});var d=this.registerMap(e,b);var c={module:"OpenStreetMap",action:"GetMarkers",srcModule:app.getModuleName(),};$.extend(c,this.selectedParams);AppConnector.request(c).then(function(f){var g=f.result;g.forEach(function(h){L.marker([h[0],h[1]]).addTo(d).bindPopup(h[2])})})},registerDetailView:function(a){this.container=a;var e=a.find("#coordinates").val();e=JSON.parse(e);var g=[0,0];var b=2;if(e.length){g=e[0];b=6}var f=$("#mapid").position();var c=$(".footerContainer ").position();$("#mapid").css({height:c.top-f.top-281});var d=this.registerMap(g,b);e.forEach(function(h){L.marker([h[0],h[1]]).addTo(d).bindPopup(h[2])})}});