
(function(){var l=20;var s=0;var y=null;var n=null;var o=0;var v=location.hash;var d="#_";var k=[];var h=0;var B;var t=false;var C="portrait";var x="landscape";window.iui={showPage:function(E,D){if(E){if(n){n.removeAttribute("selected");n=null}if(c(E,"dialog")){u(E)}else{var F=y;y=E;if(F){setTimeout(b,0,F,E,D)}else{q(E,F)}}}},showPageById:function(E){var G=j(E);if(G){var F=k.indexOf(E);var D=F!=-1;if(D){k.splice(F,k.length)}iui.showPage(G,D)}},showPageByHref:function(E,F,I,G,D){var H=new XMLHttpRequest();H.onerror=function(){if(D){D(false)}};H.onreadystatechange=function(){if(H.readyState==4){if(G){r(G,H.responseText)}else{var J=document.createElement("div");J.innerHTML=H.responseText;iui.insertPages(J.childNodes)}if(D){setTimeout(D,1000,true)}}};if(F){H.open(I||"GET",E,true);H.setRequestHeader("Content-Type","application/x-www-form-urlencoded");H.setRequestHeader("Content-Length",F.length);H.send(F.join("&"))}else{H.open(I||"GET",E,true);H.send(null)}},insertPages:function(D){var F;for(var E=0;E<D.length;++E){var H=D[E];if(H.nodeType==1){if(!H.id){H.id="__"+(++h)+"__"}var G=j(H.id);if(G){G.parentNode.replaceChild(H,G)}else{document.body.appendChild(H)}if(H.getAttribute("selected")=="true"||!F){F=H}--E}}if(F){iui.showPage(F)}},getSelectedPage:function(){for(var D=document.body.firstChild;D;D=D.nextSibling){if(D.nodeType==1&&D.getAttribute("selected")=="true"){return D}}},isNativeUrl:function(D){for(var E=0;E<iui.nativeUrlPatterns.length;E++){if(D.match(iui.nativeUrlPatterns[E])){return true}}return false},nativeUrlPatterns:[new RegExp("^http://maps.google.com/maps?"),new RegExp("^mailto:"),new RegExp("^tel:"),new RegExp("^http://www.youtube.com/watch\\?v="),new RegExp("^http://www.youtube.com/v/")]};addEventListener("load",function(D){var E=iui.getSelectedPage();if(E){iui.showPage(E)}setTimeout(m,0);setTimeout(g,0);B=setInterval(g,300)},false);addEventListener("unload",function(D){return},false);addEventListener("click",function(F){var E=a(F.target,"a");if(E){function D(){E.removeAttribute("selected")}if(E.href&&E.hash&&E.hash!="#"){E.setAttribute("selected","true");iui.showPage(j(E.hash.substr(1)));setTimeout(D,500)}else{if(E==j("backButton")){history.back()}else{if(E.getAttribute("type")=="submit"){p(a(E,"form"))}else{if(E.getAttribute("type")=="cancel"){e(a(E,"form"))}else{if(E.target=="_replace"){E.setAttribute("selected","progress");iui.showPageByHref(E.href,null,null,E,D)}else{if(iui.isNativeUrl(E.href)){return}else{if(!E.target){E.setAttribute("selected","progress");iui.showPageByHref(E.href,null,null,null,D)}else{return}}}}}}}F.preventDefault()}},true);addEventListener("click",function(D){var E=a(D.target,"div");if(E&&c(E,"toggle")){E.setAttribute("toggled",E.getAttribute("toggled")!="true");D.preventDefault()}},true);function f(){var D=window.orientation;switch(D){case 0:z(C);break;case 90:case -90:z(x);break}}if(typeof window.onorientationchange=="object"){window.onorientationchange=f;t=true;setTimeout(f,0)}function g(){if(!t){if(window.innerWidth!=o){o=window.innerWidth;var E=o==320?C:x;z(E)}}if(location.hash!=v){var D=location.hash.substr(d.length);iui.showPageById(D)}}function z(D){document.body.setAttribute("orient",D);setTimeout(scrollTo,100,0,1)}function u(D){n=D;D.setAttribute("selected","true");if(c(D,"dialog")&&!D.target){w(D)}}function w(D){D.onsubmit=function(E){E.preventDefault();p(D)};D.onclick=function(E){if(E.target==D&&c(D,"dialog")){e(D)}}}function e(D){D.removeAttribute("selected")}function q(G,H){if(!G.id){G.id="__"+(++h)+"__"}location.href=v=d+G.id;k.push(G.id);var F=j("pageTitle");if(G.title){F.innerHTML=G.title}if(G.localName.toLowerCase()=="form"&&!G.target){w(G)}var E=j("backButton");if(E){var D=j(k[k.length-2]);if(D&&!G.getAttribute("hideBackButton")){E.style.display="inline";E.innerHTML=D.title?D.title:"Back"}else{E.style.display="none"}}}function b(I,H,E){var F=(E?I:H).getAttribute("axis");if(F=="y"){(E?I:H).style.top="100%"}else{H.style.left="100%"}H.setAttribute("selected","true");scrollTo(0,1);clearInterval(B);var G=100;D();var J=setInterval(D,s);function D(){G-=l;if(G<=0){G=0;if(!c(H,"dialog")){I.removeAttribute("selected")}clearInterval(J);B=setInterval(g,300);setTimeout(q,0,H,I)}if(F=="y"){E?I.style.top=(100-G)+"%":H.style.top=G+"%"}else{I.style.left=(E?(100-G):(G-100))+"%";H.style.left=(E?-G:G)+"%"}}}function m(){var D=document.createElement("div");D.id="preloader";document.body.appendChild(D)}function p(D){iui.showPageByHref(D.action||"POST",A(D),D.method)}function A(F){function E(G){for(var H=0;H<G.length;++H){if(G[H].name){D.push(G[H].name+"="+escape(G[H].value))}}}var D=[];E(F.getElementsByTagName("input"));E(F.getElementsByTagName("textarea"));E(F.getElementsByTagName("select"));return D}function a(E,D){while(E&&(E.nodeType!=1||E.localName.toLowerCase()!=D)){E=E.parentNode}return E}function c(D,E){var F=new RegExp("(^|\\s)"+E+"($|\\s)");return F.exec(D.getAttribute("class"))!=null}function r(D,G){var F=D.parentNode;var E=D;while(F.parentNode!=document.body){F=F.parentNode;E=E.parentNode}var H=document.createElement(E.localName);H.innerHTML=G;F.removeChild(E);while(H.firstChild){F.appendChild(H.firstChild)}}function j(D){return document.getElementById(D)}function i(){console.log.apply(console,arguments)}})();