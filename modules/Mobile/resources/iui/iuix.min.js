
(function(){var u=20;var s=0;var q=null;var o=null;var k=0;var j=location.hash;var i="#_";var f=[];var e=0;var t;var r=false;var p="portrait";var l="landscape";window.iui={showPage:function(D,F){if(D){if(o){o.removeAttribute("selected");o=null}if(c(D,"dialog")){z(D)}else{var E=q;q=D;if(E){setTimeout(b,0,E,D,F)}else{x(D,E)}}}},showPageById:function(G){var F=n(G);if(F){var E=f.indexOf(G);var D=E!=-1;if(D){f.splice(E,f.length)}iui.showPage(F,D)}},showPageByHref:function(H,G,F,E,D){var I=new XMLHttpRequest();I.onerror=function(){if(D){D(false)}};I.onreadystatechange=function(){if(I.readyState==4){if(E){y(E,I.responseText)}else{var J=document.createElement("div");J.innerHTML=I.responseText;iui.insertPages(J.childNodes)}if(D){setTimeout(D,1000,true)}}};if(G){I.open(F||"GET",H,true);I.setRequestHeader("Content-Type","application/x-www-form-urlencoded");I.setRequestHeader("Content-Length",G.length);I.send(G.join("&"))}else{I.open(F||"GET",H,true);I.send(null)}},insertPages:function(G){var F;for(var H=0;H<G.length;++H){var D=G[H];if(D.nodeType==1){if(!D.id){D.id="__"+(++e)+"__"}var E=n(D.id);if(E){E.parentNode.replaceChild(D,E)}else{document.body.appendChild(D)}if(D.getAttribute("selected")=="true"||!F){F=D}--H}}if(F){iui.showPage(F)}},getSelectedPage:function(){for(var D=document.body.firstChild;D;D=D.nextSibling){if(D.nodeType==1&&D.getAttribute("selected")=="true"){return D}}},isNativeUrl:function(E){for(var D=0;D<iui.nativeUrlPatterns.length;D++){if(E.match(iui.nativeUrlPatterns[D])){return true}}return false},nativeUrlPatterns:[new RegExp("^http://maps.google.com/maps?"),new RegExp("^mailto:"),new RegExp("^tel:"),new RegExp("^http://www.youtube.com/watch\\?v="),new RegExp("^http://www.youtube.com/v/")]};addEventListener("load",function(E){var D=iui.getSelectedPage();if(D){iui.showPage(D)}setTimeout(v,0);setTimeout(h,0);t=setInterval(h,300)},false);addEventListener("unload",function(D){return},false);addEventListener("click",function(F){var E=a(F.target,"a");if(E){function D(){E.removeAttribute("selected")}if(E.href&&E.hash&&E.hash!="#"){E.setAttribute("selected","true");iui.showPage(n(E.hash.substr(1)));setTimeout(D,500)}else{if(E==n("backButton")){history.back()}else{if(E.getAttribute("type")=="submit"){w(a(E,"form"))}else{if(E.getAttribute("type")=="cancel"){d(a(E,"form"))}else{if(E.target=="_replace"){E.setAttribute("selected","progress");iui.showPageByHref(E.href,null,null,E,D)}else{if(iui.isNativeUrl(E.href)){return}else{if(!E.target){E.setAttribute("selected","progress");iui.showPageByHref(E.href,null,null,null,D)}else{return}}}}}}}F.preventDefault()}},true);addEventListener("click",function(D){var E=a(D.target,"div");if(E&&c(E,"toggle")){E.setAttribute("toggled",E.getAttribute("toggled")!="true");D.preventDefault()}},true);function g(){var D=window.orientation;switch(D){case 0:B(p);break;case 90:case -90:B(l);break}}if(typeof window.onorientationchange=="object"){window.onorientationchange=g;r=true;setTimeout(g,0)}function h(){if(!r){if(window.innerWidth!=k){k=window.innerWidth;var E=k==320?p:l;B(E)}}if(location.hash!=j){var D=location.hash.substr(i.length);iui.showPageById(D)}}function B(D){document.body.setAttribute("orient",D);setTimeout(scrollTo,100,0,1)}function z(D){o=D;D.setAttribute("selected","true");if(c(D,"dialog")&&!D.target){A(D)}}function A(D){D.onsubmit=function(E){E.preventDefault();w(D)};D.onclick=function(E){if(E.target==D&&c(D,"dialog")){d(D)}}}function d(D){D.removeAttribute("selected")}function x(H,G){if(!H.id){H.id="__"+(++e)+"__"}location.href=j=i+H.id;f.push(H.id);var F=n("pageTitle");if(H.title){F.innerHTML=H.title}if(H.localName.toLowerCase()=="form"&&!H.target){A(H)}var E=n("backButton");if(E){var D=n(f[f.length-2]);if(D&&!H.getAttribute("hideBackButton")){E.style.display="inline";E.innerHTML=D.title?D.title:"Back"}else{E.style.display="none"}}}function b(F,J,I){var H=(I?F:J).getAttribute("axis");if(H=="y"){(I?F:J).style.top="100%"}else{J.style.left="100%"}J.setAttribute("selected","true");scrollTo(0,1);clearInterval(t);var G=100;D();var E=setInterval(D,s);function D(){G-=u;if(G<=0){G=0;if(!c(J,"dialog")){F.removeAttribute("selected")}clearInterval(E);t=setInterval(h,300);setTimeout(x,0,J,F)}if(H=="y"){I?F.style.top=(100-G)+"%":J.style.top=G+"%"}else{F.style.left=(I?(100-G):(G-100))+"%";J.style.left=(I?-G:G)+"%"}}}function v(){var D=document.createElement("div");D.id="preloader";document.body.appendChild(D)}function w(D){iui.showPageByHref(D.action||"POST",C(D),D.method)}function C(E){function F(G){for(var H=0;H<G.length;++H){if(G[H].name){args.push(G[H].name+"="+escape(G[H].value))}}}var D=[];F(E.getElementsByTagName("input"));F(E.getElementsByTagName("textarea"));F(E.getElementsByTagName("select"));return D}function a(D,E){while(D&&(D.nodeType!=1||D.localName.toLowerCase()!=E)){D=D.parentNode}return D}function c(F,E){var D=new RegExp("(^|\\s)"+E+"($|\\s)");return D.exec(F.getAttribute("class"))!=null}function y(D,H){var G=D.parentNode;var F=D;while(G.parentNode!=document.body){G=G.parentNode;F=F.parentNode}var E=document.createElement(F.localName);E.innerHTML=H;G.removeChild(F);while(E.firstChild){G.appendChild(E.firstChild)}}function n(D){return document.getElementById(D)}function m(){console.log.apply(console,arguments)}})();