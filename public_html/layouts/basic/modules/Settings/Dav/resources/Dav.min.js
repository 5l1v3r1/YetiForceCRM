jQuery.Class("Settings_Dav_Keys_Js",{},{mobileContainer:false,getContainer:function(){if(this.mobileContainer==false){this.mobileContainer=jQuery("#DavKeysContainer")}return this.mobileContainer},addKey:function(f){var b=jQuery("#DavKeysContainer");var a=b.find(".addKeyContainer");var c=a.clone(true,true);var d=function(e){e.find(".addKeyContainer").removeClass("d-none").show();app.showSelect2ElementView(e.find(".select"));e.find('[name="saveButton"]').click(function(k){var i=e.find("form");var j=i.serializeFormData();var g=$.progressIndicator({message:app.vtranslate("Adding a Key"),blockInfo:{enabled:true}});var h=new Settings_Dav_Keys_Js();h.registerSaveEvent("addKey",j,true);g.progressIndicator({mode:"hide"})})};app.showModalWindow(c,function(e){if(typeof d=="function"){d(e)}},{width:"1000px"})},deleteKey:function(d){var c=$(d.currentTarget);var a=c.closest(".js-tr-row");var b=new Settings_Dav_Keys_Js();b.registerSaveEvent("deleteKey",{user:a.data("user")});a.remove()},registerSaveEvent:function(e,c,b){var d={};d.data={module:app.getModuleName(),parent:app.getParentModuleName(),action:"SaveAjax",mode:e};if(typeof c!=="undefined"){for(var a in c){d.data[a]=c[a]}}d.async=false;d.dataType="json";AppConnector.request(d).then(function(g){var f=g.result;var h={text:f.message};if(f.success==true){h.type="success"}else{h.type="error"}Vtiger_Helper_Js.showPnotify(h);if(b==true&&f.success==true){window.location.reload()}},function(g,f){})},registerEvents:function(c){var b=this;var a=b.getContainer();a.find(".js-add-key").on("click",b.addKey);a.find(".js-delete-key").on("click",b.deleteKey);App.Fields.Password.registerCopyClipboard()}});